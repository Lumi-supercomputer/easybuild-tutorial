# Practical information

Below you can find practical information on the provided resources for this tutorial.


### Slack

There is a dedicated `#tutorial` channel in the EasyBuild Slack to get in touch with the
tutorial organisers, where you can ask questions throughout the tutorial, or ask for help if needed.

To connect, you will need to create an account in the EasyBuild Slack first,
which you can do via [https://easybuild-slack.herokuapp.com/](https://easybuild-slack.herokuapp.com/).

Once you have an account, you can join the EasyBuild Slack via [https://easybuild.slack.com/](https://easybuild.slack.com/), and then join the `#tutorial` channel.


### AWS resources

*(only available during the tutorial on Tuesday June 23rd 2020)*

Access to a shell environment on [AWS Cloud9](https://aws.amazon.com/cloud9/) is provided
for this tutorial.

You should have received an email with connection information if you have registered in time for this tutorial.

***If you did not register and would still like to use AWS Cloud9 for this tutorial,
please contact the tutorial organisers via Slack.***


### Prepared container image

For the purpose of this tutorial, we have prepared a **Docker container**
that you can use to follow the hands-on exercises in a controlled environment.

This container image includes a small software stack that was installed using
EasyBuild, which will come in useful for some of the exercises.

The container is available through the [`easybuilders/tutorial` repository on Docker Hub](https://hub.docker.com/r/easybuilders/tutorial), and can be used with both Docker and Singularity.

#### Requirements for using the container images

*(only relevant if you are* ***not*** *using AWS Cloud9)*

* having Docker or Singularity installed
* a system with a processor compatible with software built for Intel Haswell (AVX2)

#### Container size

The compressed container image is about 1.1GB in size,
and will be downloaded automatically from Docker Hub when you run the `docker` or `singularity` command shown below.

#### Using Docker

If you want to use the prepared container image via Docker,
run the following `docker` command:

```
docker run -ti --hostname tutorial --rm easybuilders/tutorial:isc20-haswell
```


#### Using Singularity

*(not available in AWS environment)*

To use the prepared container image via Singularity,
run the following `singularity` command:

```shell
mkdir -p /tmp/$USER/isc20
singularity run --cleanenv --home /tmp/$USER/isc20 docker://easybuilders/tutorial:isc20-haswell
```

The additional options are required to:

* `--cleanenv`: start with clean environment
* `--home /tmp/$USER/isc20`: use (empty) `/tmp/$USER/isc20` directory as home directory in container

This is mainly to avoid that anything from the host environment or your home directory "leaks" into
the container, which could interfere with the hands-on exercises.

##### Singularity cache

By default Singularity keeps its cache at `$HOME/.singularity/cache`.
Since the uncompressed container image requires about 2.2GB of disk space,
make sure this will work in your setup.

If your home directory is limited in size you can either make `$HOME/.singularity` as symbolic link to
`/tmp/$USER/singularity` for example, or define the `$SINGULARITY_CACHEDIR` environment variable
to make Singulartiy use a different location:

```shell
export SINGULARITY_CACHEDIR=/tmp/$USER/singularity
```

##### Warning messages

When running the Docker container with Singularity, you may see a bunch of warning messages like
this pass by:

```
warn rootless{path/to/file} ignoring (usually) harmless EPERM on setxattr "user.rootlesscontainers"
```

**You can safely ignore these warnings, they are harmless.**
They occur because the Docker container image contains xattrs that can not be set when the container
is extracted as an unpriviledged user by Singularity.
The warnings are generated by the [umoci](https://umo.ci/) library that Singularity uses to extract Docker/OCI layers,
and is documented at [https://umo.ci/quick-start/rootless/](https://umo.ci/quick-start/rootless/).

#### Welcome message

If you are correctly logged in to the container, you should see a message like this:

```
You are logged in to the prepared environment for the introductory tutorial to
 ______                    ____          _  _      _
|  ____|                  |  _ \        (_)| |    | |
| |__    __ _  ___  _   _ | |_) | _   _  _ | |  __| |
|  __|  / _` |/ __|| | | ||  _ < | | | || || | / _` |
| |____| (_| |\__ \| |_| || |_) || |_| || || || (_| |
|______|\__,_||___/ \__, ||____/  \__,_||_||_| \__,_|
                     __/ |
                    |___/

The tutorial materials are available at https://easybuilders.github.io/easybuild-tutorial .

OS: CentOS Linux release 7.8.2003 (Core)
modules tool: Lmod 8.2.7

To access the pre-installed software run 'module use /easybuild/modules/all',
and then check which modules are installed using 'module avail'.

In case of questions or problems contact the tutorial organisers via the #tutorial
channel in the EasyBuild Slack, join via https://easybuild-slack.herokuapp.com .
```

#### Testing host compatibility

To leverage the pre-installed software stack that is included in the container image,
the processor in your system must be compatible with binaries that use AVX2 instructions
(Intel Haswell generation, or newer).

You can test the compatibility of your host with the following commands:

```shell
module use /easybuild/modules/all
module load Python
python -V
```

If the last command prints a Python version (like `Python 3.8.2`), then your host is compatible.

If you see a message like "`Illegal instruction (core dumped)`", the processor in your system is *not* compatible
with the pre-installed software stack.
